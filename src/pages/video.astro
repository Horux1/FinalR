---
// 1. IMPORTANTE: Capturamos la base (/FinalR/)
const base = import.meta.env.BASE_URL;
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <link rel="icon" type="image/svg+xml" href={`${base}/favicon.svg`} />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta
            name="apple-mobile-web-app-status-bar-style"
            content="black-translucent"
        />
        <meta name="mobile-web-app-capable" content="yes" />
        <title>Video Page</title>
    </head>
    <body>
        <!-- VIDEO DE FONDO GLOBAL - FUERA de las secciones -->
        <div class="fixed-video-background">
            <video autoplay loop muted playsinline>
                <source
                    src={`${base}/videos/background.mp4`}
                    type="video/mp4"
                />
                <img
                    src={`${base}/videos/background.gif`}
                    class="background-media"
                    alt="background"
                />
            </video>
        </div>
        <section class="hero-section">
            <div class="hero-content">
                <h1 class="hero-title">Ey You!!! <br /> ↓↓↓</h1>
            </div>
        </section>

        <section class="content-section">
            <div class="blur-box">
                <h2>Lemme tell you a story</h2>

                <p class="fade-paragraph">
                    Hi Liu, I hope I spelled your name right. I've been making
                    this over the last few days just as a small gesture because
                    of how special you've been to me. I have enjoyed a lot
                    talking to you these past two months, from the first sweets
                    you gave me until to your Chinese breakfast (which was
                    delicious, by the way). I wish we could have talked even
                    more; You are an authentic and very fun person, and I really
                    enjoy our chats. In fact, on some days, talking to you was
                    the highlight of my day
                </p>

                <p class="fade-paragraph">
                    I remember you telling me that you are from a region near
                    the Vietnam border (I hope I remember that correctly, if
                    not, I'm so sorry! haha). It's funny because I love history,
                    and China, Japan, and Korea are my favorite Asian countries.
                    Chinese history is fascinating, and I actually remembered a
                    series of stories from Southern China that I'll show you
                    later.
                </p>

                <p class="fade-paragraph">
                    the point is, I still remember your face a few days ago when
                    you mentioned you haven't had much luck with your PPT sales.
                    Honestly, I don't know your whole life story and I'm not who
                    to tell you what to do, but I am sure of one thing: you
                    shouldn't give up on that, or on anything you set your mind
                    to. I've seen your work, and it is genuinely awesome
                    compared to others I've seen.
                </p>

                <p class="fade-paragraph">
                    We 'Westerners' (or specifically in my culture) believe that
                    life is beautiful but sometimes unfair. But that is exactly
                    why it is beautiful—because by overcoming those challenges,
                    big or small, we get to shine, show what we are made of, and
                    appreciate how beautiful life truly is. So, just be proud of
                    yourself because I am, keep going, and don't give up. You
                    come from China, a country that has overcome great
                    challenges in its history, and I know you will too.
                </p>

                <p class="fade-paragraph">
                    Finally, it has been a pleasure meeting you. It's wonderful
                    to know there are people like you in the world. I think
                    you'll be in China when you read this however I hope you are
                    having (or had) a great time with your family. You looked
                    very happy to be there and I hope to hear how it went. I
                    hope when you come back you enjoy Australia, it's a
                    beautiful country like China, and whenever you want and can,
                    I could show you some fabulous places here in QLD o who
                    knows in around Australia as well. Thank you, stay pretty
                    and sweep dreams...
                </p>
            </div>
        </section>

        <div class="spacer"></div>

        <section class="button-section">
            <button
                class="next-button"
                onclick={`window.location.href='${base}/last/'`}
            >
                <img
                    src={`${base}/images/cat-button.gif`}
                    alt="Next"
                    class="cat-gif"
                />
                <span class="button-text">Next</span>
            </button>
        </section>

        <div class="spacer"></div>
    </body>
</html>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    html,
    body {
        width: 100%;
        min-height: 100%;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display",
            "Segoe UI", sans-serif;
        background: #000;
        color: #fff;
        overflow-x: hidden;
        position: relative;
    }

    /* VIDEO DE FONDO FIJO - CUBRE TODA LA PÁGINA */
    .fixed-video-background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        height: 100dvh;
        z-index: 0;
        overflow: hidden;
    }

    .fixed-video-background video {
        position: absolute;
        top: 50%;
        left: 50%;
        min-width: 100%;
        min-height: 100%;
        width: auto;
        height: auto;
        transform: translate(-50%, -50%);
        object-fit: cover;
    }

    /* HERO SECTION */
    .hero-section {
        position: relative;
        height: 300vh;
        z-index: 1;
    }

    .hero-content {
        position: sticky;
        top: 0;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 2rem;
    }

    .hero-title {
        font-size: 12vw;
        font-weight: 900;
        line-height: 1;
        letter-spacing: -0.02em;
        opacity: 1;
        transform: scale(1);
        will-change: transform, opacity;
    }

    /* CONTENT SECTION */
    .content-section {
        position: relative;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1;
        padding: 2rem 0;
    }

    .blur-box {
        position: relative;
        z-index: 2;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-radius: 30px;
        padding: 4rem 3rem;
        max-width: 800px;
        margin: 2rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    }

    .blur-box h2 {
        font-size: clamp(2rem, 5vw, 3.5rem);
        margin-bottom: 2rem;
        font-weight: 700;
    }

    .fade-paragraph {
        font-size: clamp(1rem, 2.5vw, 1.3rem);
        line-height: 1.8;
        margin-bottom: 2rem;
        opacity: 0;
        transform: translateY(30px);
        transition:
            opacity 0.8s ease-out,
            transform 0.8s ease-out;
    }

    .fade-paragraph.visible {
        opacity: 1;
        transform: translateY(0);
    }

    /* BUTTON SECTION */
    .button-section {
        position: relative;
        z-index: 2;
        display: flex;
        justify-content: center;
        padding: 4rem 0;
    }

    .next-button {
        position: relative;
        padding: 0;
        border: none;
        background: transparent;
        cursor: pointer;
        overflow: visible;
        transition: transform 0.3s ease;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
    }

    .next-button:hover {
        transform: translateY(-5px);
    }

    .next-button:active {
        transform: translateY(-2px);
    }

    .cat-gif {
        width: 200px;
        height: 200px;
        object-fit: cover;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    }

    .button-text {
        font-size: 2rem;
        font-weight: 900;
        color: #fff;
        text-transform: uppercase;
        letter-spacing: 0.2em;
        text-shadow:
            0 0 20px rgba(255, 255, 255, 0.8),
            0 0 40px rgba(255, 255, 255, 0.5),
            0 4px 10px rgba(0, 0, 0, 0.8);
        animation: glow-pulse 2s ease-in-out infinite;
    }

    @keyframes glow-pulse {
        0%,
        100% {
            text-shadow:
                0 0 20px rgba(255, 255, 255, 0.8),
                0 0 40px rgba(255, 255, 255, 0.5),
                0 4px 10px rgba(0, 0, 0, 0.8);
        }
        50% {
            text-shadow:
                0 0 30px rgba(255, 255, 255, 1),
                0 0 60px rgba(255, 255, 255, 0.8),
                0 4px 15px rgba(0, 0, 0, 0.8);
        }
    }

    .spacer {
        height: 50vh;
        position: relative;
        z-index: 1;
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
        .blur-box {
            padding: 2rem 1.5rem;
            margin: 1rem;
        }

        .hero-title {
            font-size: 20vw;
        }

        .cat-gif {
            width: 150px;
            height: 150px;
        }

        .button-text {
            font-size: 1.5rem;
        }
    }

    /* FIX PARA iOS */
    @supports (-webkit-touch-callout: none) {
        .fixed-video-background {
            height: -webkit-fill-available;
        }
    }
</style>

<script is:inline>
    document.addEventListener("DOMContentLoaded", () => {
        const heroTitle = document.querySelector(".hero-title");
        const heroSection = document.querySelector(".hero-section");

        if (!heroTitle || !heroSection) return;

        window.addEventListener("scroll", () => {
            const scrollY = window.scrollY;
            const heroHeight = heroSection.offsetHeight;
            const startEffect = window.innerHeight * 0.3;
            const endEffect = heroHeight - window.innerHeight;

            if (scrollY < startEffect) {
                heroTitle.style.transform = "scale(1)";
                heroTitle.style.opacity = "1";
            } else {
                const progress =
                    (scrollY - startEffect) / (endEffect - startEffect);
                const clampedProgress = Math.max(0, Math.min(1, progress));
                const scale = 1 + clampedProgress * 2.5;
                const opacity = 1 - clampedProgress * 0.8;

                heroTitle.style.transform = `scale(${scale})`;
                heroTitle.style.opacity = String(opacity);
            }
        });

        const fadeElements = document.querySelectorAll(".fade-paragraph");
        const observerOptions = {
            threshold: 0.2,
            rootMargin: "0px 0px -100px 0px",
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.classList.add("visible");
                } else {
                    entry.target.classList.remove("visible");
                }
            });
        }, observerOptions);

        fadeElements.forEach((element) => observer.observe(element));

        const video = document.querySelector(".fixed-video-background video");
        if (video) {
            video.play().catch(() => {});
        }
    });
</script>
